var Membership={_isLoggedIn:!1,_logOutUrl:"",_minUserNameLength:3,_minPasswordLength:5,_redirectToPrevious:!1,_centerMeTimer:null,get_isLoggedIn:function(){return Membership._isLoggedIn},set_isLoggedIn:function(n){Membership._isLoggedIn=n},set_logOutUrl:function(n){Membership._logOutUrl=n},set_minPasswordLength:function(n){Membership._minPasswordLength=n},init:function(){function n(n,t){t.css("border-color","#CE0000"),t.next("span.error").text(n.text()).css("display","block").css("width",parseInt(t.css("width"))-31)}function t(n){$(n).next("span.error").show()}function i(n){$(n).next("span.error").hide()}$.validator.addMethod("userName",function(n){return/^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$/.test(n)},"Nazwa użytkownika musi składać się ze znaków alfanumerycznych (plus '-','_') i zaczynać się literą."),$("#lnkLogin").click(function(){Membership.showLogin(!1)}),$("#lostPassword").click(function(){Membership.showLostPassword(!1)}),$("#lnkSignup, #lnkSignup2").click(function(){Membership.showSignUp()}),$("#lnkChangePassword").click(function(){Membership.showChangePassword()}),$("#lnkLogout").click(function(){Membership.logout()}),$("#membershipBox").keydown(function(n){n.keyCode===27&&Membership._hide(!1)}),$("#membershipClose").bind("click",function(){Membership._hide(!1)}),$("#frmOpenIdLogin").validate({rules:{identifier:"required"},messages:{identifier:"Pole Open ID nie może być puste."},errorPlacement:n,highlight:t,unhighlight:i}),$("#frmLogin").validate({rules:{userName:"required",password:"required"},messages:{userName:"Nazwa użytkownika jest wymagana.",password:"Hasło jest wymagane."},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$("#loginMessage").hide().text("").css("color",""),$U.disableInputs("#loginSection",!0),$U.showProgress("Walidacja...","#chkLoginRememberMe")},success:function(n){$U.disableInputs("#loginSection",!1),$U.hideProgress(),n.isSuccessful?(Membership._hide(!0),window.location.reload()):($("#loginMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"}),$U.focus("txtLoginUserName"))}};return $(n).ajaxSubmit(t),!1},errorPlacement:n,highlight:t,unhighlight:i}),$("#frmForgotPassword").validate({rules:{email:{required:!0,email:!0}},messages:{email:{required:"Email nie może być pusty.",email:"Niepoprawny adres e-mail."}},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$U.disableInputs("#loginSection",!0),$U.showProgress("Weryfikacja...","#txtForgotEmail")},success:function(n){$U.disableInputs("#loginSection",!1),$U.hideProgress(),n.isSuccessful?$U.messageBox("Hasło wysłane","Twoje nowe hasło zostało wysłane\r\n na twój adres e-mail.",!1,function(){Membership._hide(!0)}):($("#forgotPasswordMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"}),$U.focus("txtForgotEmail"))}};return $(n).ajaxSubmit(t),!1},errorPlacement:n,highlight:t,unhighlight:i}),$("#frmChangePassword").validate({rules:{oldPassword:"required",newPassword:{required:!0,minlength:Membership._minPasswordLength},confirmPassword:{required:!0,equalTo:"#txtChangeNewPassword"}},messages:{oldPassword:"Stare hasło nie może być puste",newPassword:{required:"Nowe hasło nie może być puste",minlength:"Nowe hasło nie może być krótsze niż "+Membership._minPasswordLength+" znaków."},confirmPassword:{required:"Potwierdzenie hasła nie może być puste",equalTo:"Hasła muszą się zgadzać."}},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$("#changePasswordMessage").hide().text("Changing...").css("color",""),$U.disableInputs("#changePasswordSection",!0),$U.showProgress("Zmiana...","#txtChangenConfirmPassword")},success:function(n){$U.disableInputs("#changePasswordSection",!1),$U.hideProgress(),n.isSuccessful?$U.messageBox("Hasło zmienione","Twoje hasło zostało zmienione.",!1,function(){Membership._hide(!0)}):$("#changePasswordMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"})}};return $(n).ajaxSubmit(t),!1},errorPlacement:n,highlight:t,unhighlight:i}),$("#frmSignup").validate({rules:{userName:{required:!0,minlength:Membership._minUserNameLength,userName:!0},password:{required:!0,minlength:Membership._minPasswordLength},email:{required:!0,email:!0}},messages:{userName:{required:"Nazwa użytkownika nie może być pusta.",minlength:"Nazwa użytkownika nie może być krótsza niż "+Membership._minUserNameLength+" znaki/-ów."},password:{required:"Hasło nie może być puste.",minlength:"Hasło nie może być krótsze niż "+Membership._minPasswordLength+" znaki/-ów."},email:{required:"Email nie może być pusty.",email:"Niepoprawny format adresu email."}},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$("#signupMessage").hide().text("Rejestracja...").css("color",""),$U.disableInputs("#signupSection",!0),$U.showProgress("Rejestracja...","#txtSignupEmail")},success:function(n){$U.disableInputs("#signupSection",!1),$U.hideProgress(),n.isSuccessful?$U.messageBox("Konto utworzone","Twoje konto zostało poprawnie utworzone. Proszę postępuj zgodnie z informacjami w mailu aby aktywować konto.",!1,function(){Membership._hide(!0),window.location.reload()}):$("#signupMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"})}};return $(n).ajaxSubmit(t),!1},errorPlacement:n,highlight:t,unhighlight:i}),$("#lnkChangeEmail").click(function(){$("#emailViewSection").hide(),$("#emailEditSection").show(),$U.focus("txtChangeEmail")}),$("#lnkCancelEmail").click(function(){$("#emailEditSection").hide(),$("#emailViewSection").show()}),$("#frmChangeEmail").validate({rules:{email:{required:!0,email:!0}},messages:{email:{required:"E-mail nie może być pusty.",email:"Niepoprawny format adresu."}},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$U.disableInputs("#emailEditSection",!0),$U.showProgress("Aktualizacja adresu...","#btnChangeEmail")},success:function(n){$U.disableInputs("#emailEditSection",!1),$U.hideProgress(),n.isSuccessful?($("#emailEditSection").hide(),$("#emailViewSection").show(),$("#spnEmail").text($("#txtChangeEmail").val())):($U.focus("txtChangeEmail"),$("#spnChangeEmailError").text(n.errorMessage).show())}};return $(n).ajaxSubmit(t),!1},errorPlacement:function(n){$("#spnChangeEmailError").text(n.text())},highlight:function(){$("#spnChangeEmailError").show()},unhighlight:function(){$("#spnChangeEmailError").hide()}})},dispose:function(){Membership._clearCenterMeTimer(),$("#membershipBox").unbind(),$("#membershipClose").unbind(),$("#lnkLogin").unbind(),$("#lnkSignup").unbind(),$("#lnkSignup2").unbind(),$("#lnkChangePassword").unbind(),$("#lnkLogout").unbind(),$("#lostPasswordSection").unbind()},showLostPassword:function(n){Membership._redirectToPrevious=n,$("#signupSection").hide(),$("#changePasswordSection").hide(),$("#loginSection").hide(),$("#lostPasswordSection").show(),Membership._show()},showLogin:function(n){Membership._redirectToPrevious=n,$("#signupSection").hide(),$("#changePasswordSection").hide(),$("#loginSection").show(),$("#lostPasswordSection").hide(),Membership._show(),$U.focus("txtOpenId")},showChangePassword:function(){$("#signupSection").hide(),$("#loginSection").hide(),$("#lostPasswordSection").hide(),$("#changePasswordSection").show(),Membership._show(),$U.focus("txtChangeOldPassword")},showSignUp:function(){Membership._redirectToPrevious=!1,$("#signupSection").show(),$("#loginSection").hide(),$("#lostPasswordSection").hide(),$("#changePasswordSection").show(),Membership._show(),$U.focus("txtSignupUserName")},logout:function(){$.ajax({url:Membership._logOutUrl,type:"POST",dataType:"json",data:"__MVCASYNCPOST=true",success:function(n){n.isSuccessful?window.location.reload():$U.alert("Error",n.errorMessage,!0)}})},_show:function(){$U.blockUI();var n=$("#membershipBox");$U.center(n),n.fadeIn(),Membership._centerMe(),n.find("input").each(function(){var t=$(this)[0],n=t.type.toLowerCase();n=="text"||n=="file"||n=="password"?t.value="":(n=="checkbox"||n=="radio")&&(t.checked=!1)}),$("span.error").hide(),$("span.message").hide()},_hide:function(n){$U.disableInputs("#membershipBox",!1),$U.hideProgress(),Membership._clearCenterMeTimer(),$("#membershipBox").fadeOut("normal",function(){$U.unblockUI(),!n&&Membership._redirectToPrevious&&(window.location=document.referrer.length>0?document.referrer:"/")})},_centerMe:function(){var n=$("#membershipBox");$U.center(n),Membership._clearCenterMeTimer(),Membership._centerMeTimer=setInterval(function(){Membership._centerMe()},2e3)},_clearCenterMeTimer:function(){Membership._centerMeTimer!=null&&(clearInterval(Membership._centerMeTimer),Membership._centerMeTimer=null)}};
//@ sourceMappingURL=Membership.min.js.map