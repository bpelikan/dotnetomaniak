var Moderation={_markCommentAsOffendedUrl:"",_spamCommentUrl:"",_deleteAdUrl:"",_deleteStoryUrl:"",_spamStoryUrl:"",_approveStoryUrl:"",_getStoryUrl:"",_generateMiniatureStoryUrl:"",_centerMeTimer:null,set_markCommentAsOffendedUrl:function(n){Moderation._markCommentAsOffendedUrl=n},set_spamCommentUrl:function(n){Moderation._spamCommentUrl=n},set_deleteAdUrl:function(n){Moderation._deleteAdUrl=n},set_deleteStoryUrl:function(n){Moderation._deleteStoryUrl=n},set_spamStoryUrl:function(n){Moderation._spamStoryUrl=n},set_approveStoryUrl:function(n){Moderation._approveStoryUrl=n},set_getStoryUrl:function(n){Moderation._getStoryUrl=n},set_generateMiniatureStoryUrl:function(n){Moderation._generateMiniatureStoryUrl=n},init:function(){function n(n,t){t.css("border-color","#CE0000"),t.next("span.error").text(n.text()).css("display","block").css("width",parseInt(t.css("width"))-31)}function t(n){$(n).next("span.error").show()}function i(n){$(n).next("span.error").hide()}$("#storyEditorBox").keydown(function(n){n.keyCode===27&&Moderation._hide()}),$("#storyEditorClose").click(function(){Moderation._hide()}),$("#frmStoryUpdate").validate({rules:{name:"required",createdAt:"required",description:{required:!0,rangelength:[8,2048]},category:"required",tags:"required"},messages:{name:"Nazwa nie może być pusta.",createdAt:"Pole Utworzono nie może być puste.",title:{required:"Tytuł nie może być pusty.",maxlength:"Tytuł nie może być dłuższy niż 256 znaków."},description:{required:"Opis nie może być pusty.",rangelength:"Opis musi zawierać się pomiędzy 8 a 2048 znakami."},category:"Kategoria musi być wybrana.",tags:"Podaj przynajmniej jeden tag dla artykułu."},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$("#updateStoryMessage").text("").css("color","").hide(),$U.disableInputs("#frmStoryUpdate",!0),$U.showProgress("Aktualizacja wpisu...","#btnUpdateStory")},success:function(n){$U.disableInputs("#frmStoryUpdate",!1),$U.hideProgress(),n.isSuccessful?Moderation._hide():$("#updateStoryMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"})}};$(n).ajaxSubmit(t)},errorPlacement:function(n,t){t.parents("p:first").find("span.error").text(n.text())},highlight:function(n){$(n).parents("p:first").find("span.error").show()},unhighlight:function(n){$(n).parents("p:first").find("span.error").hide()}}),$("#lnkAddRecomendation").click(function(){Moderation.showRecommendation()}),$("a[data-id]").click(function(){Moderation.deleteAd($(this).data("id"))}),$("#frmRecommendation").validate({rules:{RecommendationLink:{required:!0},RecommendationTitle:{required:!0},ImageLink:{required:!0},ImageTitle:{required:!0},StartTime:{required:!0},EndTime:{required:!0}},messages:{RecommendationLink:{required:"Link rekomendacji nie może być pusty."},RecommendationTitle:{required:"Tytuł rekomendacji nie może być pusty."},ImageLink:{required:"Link obrazka nie może być pusty."},ImageTitle:{required:"Tytuł rekomendacji nie może być pusty."},StartTime:{required:"Data startowa jest wymagana."},EndTime:{required:"Data końcowa jest wymagana."}},submitHandler:function(n){var t={dataType:"json",beforeSubmit:function(){$("#RecommendationMessage").hide().text("Tworzenie...").css("color",""),$U.disableInputs("#RecommendationSection",!0),$U.showProgress("Tworzenie...")},success:function(n){$U.disableInputs("#RecommendationSection",!1),$U.hideProgress(),Membership._hide(!0),n.isSuccessful?$U.messageBox("Sukces","Rekomendacja utworzona",!1,function(){window.location.reload()}):$("#RecommendationMessage").text(n.errorMessage).css({color:"#ff0000",display:"block"})}};return $(n).ajaxSubmit(t),!1},errorPlacement:n,highlight:t,unhighlight:i})},dispose:function(){},deleteAd:function(n){function t(){var t="id="+encodeURIComponent(n);$.ajax({url:"/DeleteAd",type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Usuwanie reklamy")},success:function(n){$U.hideProgress(),n.isSuccessful?window.location.reload():$U.messageBox("Error",n.errorMessage,!0)}})}$U.confirm("Usunięcie reklamy?","Czy jesteś pewny, że chcesz usunać daną reklamę?",t)},editStory:function(n){var t="id="+encodeURIComponent(n);$U.disableInputs("#frmStoryUpdate",!0),$.ajax({url:Moderation._getStoryUrl,type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Wczytywanie artykułu...")},success:function(n){if($U.hideProgress(),$U.disableInputs("#frmStoryUpdate",!1),n.errorMessage)$U.messageBox("Error",n.errorMessage,!0);else{$U.blockUI();var t=$("#storyEditorBox");$("span.error").hide(),$("span.message").hide(),$("#hidStoryId").val(n.id),$("#txtStoryName").val(n.name),$("#txtStoryCreatedAt").val(n.createdAt),$("#txtStoryTitle").val(n.title),$("#txtStoryDescription").val(n.description),$("#txtStoryTags").val(n.tags),$("#frmStoryUpdate input[type=radio]").each(function(){var t=$(this)[0];t.value==n.category&&(t.checked=!0)}),$U.center(t),t.fadeIn(),Moderation._centerMe()}}})},approveStory:function(n){function t(){var t="id="+encodeURIComponent(n);$.ajax({url:Moderation._approveStoryUrl,type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Zatwierdzanie wpisu...")},success:function(t){$U.hideProgress(),t.isSuccessful?$("#t-"+n).fadeOut("normal",function(){$(this).remove()}):$U.messageBox("Error",t.errorMessage,!0)}})}$U.confirm("Zatwierdź artykuł?","Czy jesteś pewny, że chcesz zatwierdzić dany artykuł?",t)},deleteStory:function(n){function t(){var t="id="+encodeURIComponent(n);$.ajax({url:Moderation._deleteStoryUrl,type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Usuwanie artykułu...")},success:function(t){$U.hideProgress(),t.isSuccessful?$("#t-"+n).fadeOut("normal",function(){$(this).remove()}):$U.messageBox("Error",t.errorMessage,!0)}})}$U.confirm("Usunięcie artykułu?","Czy jesteś pewny, że chcesz usunać dany artykuł?",t)},confirmSpamStory:function(n){function t(){var t="id="+encodeURIComponent(n);$.ajax({url:Moderation._spamStoryUrl,type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Zatwierdzanie spamowego artykułu...")},success:function(t){$U.hideProgress(),t.isSuccessful?$("#t-"+n).fadeOut("normal",function(){$(this).remove()}):$U.messageBox("Error",t.errorMessage,!0)}})}$U.confirm("Oznacz jako spam?","Czy na pewno chcesz oznaczyć artykuł jako spam?",t)},generateMiniatureStory:function(n){function t(){var t="id="+encodeURIComponent(n);$.ajax({url:Moderation._generateMiniatureStoryUrl,type:"POST",dataType:"json",data:t,beforeSend:function(){$U.showProgress("Generowanie miniatury")},success:function(n){$U.hideProgress(),n.isSuccessful?$(".entry-thumb img").attr("src",n.url):$U.messageBox("Error",n.errorMessage,!0)}})}$U.confirm("Generowanie miniaturki","Czy jesteś pewny, że chcesz pobrać miniaturkę?",t)},confirmSpamComment:function(n,t){function i(){var i={storyId:n,commentId:t};$.ajax({url:Moderation._spamCommentUrl,type:"POST",dataType:"json",data:i,beforeSend:function(){$U.showProgress("Zatwierdzanie spamowego komentarza...")},success:function(n){$U.hideProgress(),n.isSuccessful?$("#li-"+t).fadeOut("normal",function(){$(this).remove()}):$U.messageBox("Error",n.errorMessage,!0)}})}$U.confirm("Zatwierdzić spamowy komentarz?","Jesteś pewien, że chcesz zatwierdzić komentarz jako spamowy?",i)},markCommentAsOffended:function(n,t){function i(){var i={storyId:n,commentId:t};$.ajax({url:Moderation._markCommentAsOffendedUrl,type:"POST",dataType:"json",data:i,beforeSend:function(){$U.showProgress("Zaznaczanie jako obraźliwy...")},success:function(n){$U.hideProgress(),n.isSuccessful?$U.messageBox("Sukces","Komentarz został oznaczony jako obraźliwy.",!1):$U.messageBox("Błąd",n.errorMessage,!0)}})}$U.confirm("Obraźliwy?","Jesteś pewien, że chcesz zaznaczyć komenatrz jako obraźliwy?",i)},_hide:function(){$U.disableInputs("#storyEditorBox",!1),$U.hideProgress(),Moderation._clearCenterMeTimer(),$("#storyEditorBox").fadeOut("normal",function(){$U.unblockUI()})},_centerMe:function(){var n=$("#storyEditorBox");$U.center(n),Moderation._clearCenterMeTimer(),Moderation._centerMeTimer=setInterval(function(){Moderation._centerMe()},2e3)},_clearCenterMeTimer:function(){Moderation._centerMeTimer!=null&&(clearInterval(Moderation._centerMeTimer),Moderation._centerMeTimer=null)},showRecommendation:function(){$(".contentContainer > div").hide(),$("#RecommendationSection").show(),Membership._show(),$U.focus("txtRecommendationLink")}};
//@ sourceMappingURL=Moderation.min.js.map