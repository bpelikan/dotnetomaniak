var Comment = { _isPreviewOpen: !0, _captchaEnabled: !1, set_captchaEnabled: function (n) { Comment._captchaEnabled = n }, init: function () { function n(n) { var t = n.parents("p:first").find("span.error"); return t.length == 0 && Membership.get_isLoggedIn() && Comment._captchaEnabled && (t = n.parents("div#recaptcha_area").find("span.error")), t } if ($("#commentTabs").show(), $("#txtCommentBody").length > 0 && ($("#lnkCommentPreview").click(function () { Comment._isPreviewOpen ? ($("#commentPreview").slideUp("normal"), $("#lnkCommentPreview").addClass("rollUp"), $("#lnkCommentPreview").text("pokaż podgląd"), Comment._isPreviewOpen = !1) : ($("#commentPreview").slideDown("normal"), $("#lnkCommentPreview").removeClass("rollUp"), $("#lnkCommentPreview").text("ukryj podgląd"), Comment._isPreviewOpen = !0) }), RichEditor.create($("#txtCommentBody"), $("#hidbody"), $("#commentPreview"))), $("#frmCommentSubmit").validate({ rules: { commentBody: { required: !0, maxlength: 2048 } }, messages: { commentBody: { required: "Komentarz nie może byc pusty.", maxlength: "Komentarz nie może być dłuższy niż 2048 znaków." } }, submitHandler: function (n) { var t = { dataType: "json", beforeSubmit: function () { if (!Membership.get_isLoggedIn()) return Membership.showLogin(!1), !1; $("#commentMessage").text("").css("color", "").hide(), $U.disableInputs("#frmCommentSubmit", !0), $U.showProgress("Dodawanie komentarza...", "#btnCommentSubmit") }, success: function (n) { $U.disableInputs("#frmCommentSubmit", !1), $U.hideProgress(), n.isSuccessful ? ($("#txtCommentBody").val(""), $("#commentMessage").text("Dziękujemy za dodanie komentarza. Pojawi się on wkrótce.").css("color", "").show()) : $("#commentMessage").text(n.errorMessage).css("color", "#ff0000").show() } }; return $(n).ajaxSubmit(t), !1 }, errorPlacement: function (t, i) { i.css("border-color", "#CE0000"), n(i).text(t.text()).css("display", "block") }, highlight: function (t) { n($(t)).show() }, unhighlight: function (t) { n($(t)).hide() } }), Membership.get_isLoggedIn() && Comment._captchaEnabled) var t = setInterval(function () { $("#recaptcha_area").length > 0 && $("#recaptcha_response_field").length > 0 && ($('<span class="error"><\/span>').appendTo("#recaptcha_area"), $("#recaptcha_response_field").attr("title", "Pole weryfikacja CAPTCHA nie może być puste.").rules("add", { required: !0 }), window.clearInterval(t)) }, 500); $("#lnkCommentLogin").click(function () { Membership.showLogin(!1) }), $("#lnkCommentSignup").click(function () { Membership.showSignUp() }) }, dispose: function () { $("#lnkCommentLogin").unbind(), $("#lnkCommentSignup").unbind(), $("#lnkCommentPreview").unbind(), $("#txtCommentBody").unbind() } }